<!DOCTYPE html>
<html>
  <head>
    <title>Connected.Stairs</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/data2/w3.css">
    <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <link media="all" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/s.css">
    <link rel="stylesheet" href="/loader.css"> -->
    <script src="api.js"></script>
  </head>
  <body>
    <div class="w3-top">
      <div class="w3-bar w3-white w3-card" id="myNavbar">
        <a href="/index.html" class="w3-bar-item w3-button w3-wide">CONNECTED STAIRS</a>
        <div class="w3-right w3-hide-small">
          <a href="/wifi.html" class="w3-bar-item w3-button">
            <i class="fa fa-wifi"></i> WIFI </a>
          <a href="/mqtt.html" class="w3-bar-item w3-button">
            <i class="fa fa-wifi"></i> MQTT </a>
          <a href="/stairs.html" class="w3-bar-item w3-button">
            <i class="fa fa-gears"></i> STAIRS </a>
        </div>
        <a href="javascript:void(0)" class="w3-bar-item w3-button w3-right w3-hide-large w3-hide-medium" onclick="w3_open()">
          <i class="fa fa-bars"></i>
        </a>
      </div>
    </div>
    <nav class="w3-sidebar w3-bar-block w3-black w3-card w3-animate-left w3-hide-medium w3-hide-large" style="display:none" id="mySidebar">
      <a href="javascript:void(0)" onclick="w3_close()" class="w3-bar-item w3-button w3-large w3-padding-16">Close &times;</a>
      <a href="/wifi.html" onclick="w3_close()" class="w3-bar-item w3-button">WIFI</a>
      <a href="/mqtt.html" onclick="w3_close()" class="w3-bar-item w3-button">MQTT</a>
      <a href="/stairs.html" onclick="w3_close()" class="w3-bar-item w3-button">STAIRS</a>
    </nav>
    
    <header class="bgimg-1 w3-display-container w3-padding-top-64" id="home">
        <div class="loading" id="loader" hidden>
          <div></div>
          <div></div>
        </div>
        <div class="w3-text-white" style="padding:48px">
          <span class="w3-xxlarge w3-hide-small">Connect to Broker</span>
          <br>
          <form>
            <input type="text" name="MQTTServer" id="mqtt_server" placeholder="Server name" autocomplete="SSID" required="true" size="30%" oninput="enableConnection()">
            <div class="ptop">
              <input type="text" name="MQTTPort" id="mqtt_port" placeholder="1883" value="1883" autocomplete="SSID" required="true" size="30%">
            </div>
            <div class="ptop">
              <input type="text" name="MQTTUsername" id="mqtt_username" placeholder="Username" autocomplete="SSID" required="false" size="30%">
            </div>
            <div class="ptop">
              <input type="password" name="password" id="mqtt_password" placeholder="Password" autocomplete="current-password" required="false" size="30%">
            </div>
          </form>
          <div class="div-center">
            <button class="button connect" id="connect-wifi" onclick="setMQTTConf()" disabled>
              <svg class="icon" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 6C8.62 6 5.5 7.12 3 9L1.2 6.6C4.21 4.34 7.95 3 12 3S19.79 4.34 22.8 6.6L21 9C18.5 7.12 15.38 6 12 6M16.84 13.41C17.18 13.27 17.55 13.17 17.92 13.1L19.2 11.4C17.19 9.89 14.7 9 12 9S6.81 9.89 4.8 11.4L6.6 13.8C8.1 12.67 9.97 12 12 12C13.78 12 15.44 12.5 16.84 13.41M12 15C10.65 15 9.4 15.45 8.4 16.2L12 21L13.04 19.61C13 19.41 13 19.21 13 19C13 17.66 13.44 16.43 14.19 15.43C13.5 15.16 12.77 15 12 15M23 19L20 16V18H16V20H20V22L23 19Z" />
              </svg>
              <span id="broker-name">Connect</span>
            </button>
          </div>
        </div>
      </header>
      <script>
        function enableConnection() {
          if (document.getElementById("mqtt_server").value.length === 0) document.getElementById("connect-wifi").disabled = true;
          else document.getElementById("connect-wifi").disabled = false;
        }
      </script>
      <script type="text/javascript">
        window.onload = getMQTTConfig();
      </script>
    
    <footer class="w3-center w3-black w3-padding-64">
      <p>Powered by Arkang3 </a>
      </p>
    </footer>
    <script>
      // Modal Image Galleryfunction onClick(element){document.getElementById("img01").src=element.src; document.getElementById("modal01").style.display="block"; var captionText=document.getElementById("caption"); captionText.innerHTML=element.alt;}// Toggle between showing and hiding the sidebar when clicking the menu iconvar mySidebar=document.getElementById("mySidebar");function w3_open(){if (mySidebar.style.display==='block'){mySidebar.style.display='none';}else{mySidebar.style.display='block';}}// Close the sidebar with the close buttonfunction w3_close(){mySidebar.style.display="none";}
    </script>
  </body>
</html>